<!DOCTYPE html>
<div lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="styles.css" rel="stylesheet">
	<link rel="icon" type="image/x-icon" href="/images/favicon.ico">
	<script src="https://code.jquery.com/jquery-3.6.1.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>

	<title> TLP Explorer </title>
</head>

	<h2> Tractatus Logico-Philosophicus explorer </h2> 

	<hr>

	<div class="panel">
		<table>
			<tr> <th>Paragraphs</th> <th>Search request</th> </tr>
			<tr>
				<td> <textarea id="find-request" style="width: 5vmin; resize: horizontal;">(1-7)</textarea> </td>
				<td> <textarea id="find-request">proposition (and) sign (or) expression (not) world</textarea> </td>
			</tr>
		</table>

		<div style="display: flex; justify-content: flex-end; flex-wrap: wrap;">
			<div id="lang-sel" value="eng" class="checked "/> English </div>
			<div id="lang-sel" value="deu" class=""/> Deutsch </div>
			<div id="lang-sel" value="rus" class=""/> Русский <br>
				<p style="font-size: 0.45em; margin-top: 0; font-style: italic;">(перевод Добросельский)</p></div>
		</div>
	</div>

	<hr>

	<div>
		<ul id="view-res" style="padding-inline-start: 0;">
			<li><span class="caret">1. Мир есть все то, что имеет место.</span>
			<ul class="nested">
				<li><span class="caret">1.1. Мир – совокупность фактов, а не предметов.</span>
				<ul class="nested">
					<li><span>1.11. Мир определяется фактами и тем, что все они суть факты.</span></li>
					<li><span>1.12. Совокупность фактов определяет все то, что имеет место, а также то, что не имеет места.</span></li>
					<il><span>1.13. Мир есть факты в логическом пространстве.</span></il>
				</ul>
				</li>

				<li><span class="caret">1.2. Мир членится на факты.</span>
				<ul class="nested">
					<li><span>1.21. Всякий факт может иметь место или не иметь места, а прочее останется неизменным.</span></li>
				</ul>
				</li>
			</ul>
			</li>

			<li><span class="caret">2. То, что имеет место – факт, – есть совокупность позиций.</span>
			<ul class="nested">
				<li><span>2.01. Позиция определяется связями между объектами (предметами, вещами).</span>
			</ul>
			</li>
		</ul>
	</div>

</body>

<script src="functional.js"></script>

<script>

JSON.clone = function(obj) {
	return JSON.parse(JSON.stringify(obj));
};

var tlp_json;
var par_arr;

fetch('./TLP.json')
    .then((response) => response.json())
    .then((json) => 
	{
		tlp_json = JSON.clone(json)
		par_arr = tree_to_par_arr(tlp_json)

		document.getElementById('view-res').innerHTML = tree_to_html(json, 'eng')

		var toggler = document.getElementsByClassName("caret");

		for (var i = 0; i < toggler.length; i++) {
			toggler[i].addEventListener("click", function() {
				this.parentElement.querySelector(".nested").classList.toggle("active");
				this.classList.toggle("caret-down");
			});
		}
	});


$(document).on('click', 'div[id="lang-sel"]', function() {      
    $(this).addClass('checked')
    $('div[id="lang-sel"]').not(this).removeClass('checked')

	var lang = $(this).attr('value')

	console.log(par_arr.length)

	for (const par of par_arr) {
		var new_text = '';
		if (lang == 'eng') new_text = par.proposition.english
		if (lang == 'deu') new_text = par.proposition.german
		if (lang == 'rus') new_text = par.proposition.russian

		$(`span[name="${par.number}"]`).html(to_par_number(par.number) + new_text)
	}
});


</script>

</html>
